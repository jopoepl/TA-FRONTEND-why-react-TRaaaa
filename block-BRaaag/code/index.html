<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>

<body>
    <div class="movie-cont">
        <h1>My Movie Watch List</h1>
        <input class="movie-input" type="text" placeholder="Enter Movie Name">
        <div class="movie-list">
            <div class="watch-list">
            </div>
        </div>
    </div>
    <script
  crossorigin
  src="https://unpkg.com/react@17/umd/react.development.js"
></script>
<script
  crossorigin
  src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
    let input = document.querySelector(`input`);
let rootElm = document.querySelector(`.movie-list`);

console.log(input, "input")

let allMovies = [
    { 
        name: `Forest Gump`,
        watched: false,
    },
    { 
        name: `LOTR`,
        watched: true,
    },
];

input.addEventListener(`keyup`, (event) => {
    if(event.keyCode === 13){
        allMovies.push({
            name: event.target.value,
            watched: false,
        })
        event.target.value = "";
        createUI(allMovies, rootElm)
    }
   
})



function handleChange (event) {
    let id = event.target.id;
    console.log("handlechange trigged")
    allMovies[id].watched = !allMovies[id].watched;
    createUI(allMovies, rootElm)
}

let elm = React.createElement


// function elm(element, attr = {}, ...children){
//     let ele = document.createElement(element);
//     for(let key in attr){
//         if(key.startsWith(`data-`)){
//             ele.setAttribute(key, attr[key])
//         } else {
//             ele[key] = attr[key]
//         }
//     } 
//     children.forEach((child) => {
//         if(typeof child === "object"){
//             ele.prepend(child)
//         }
//         if(typeof child === "string"){
//             let node = document.createTextNode(child);
//             ele.append(node)
//         }
//     })
//     return ele
// }


function createUI(data, root) {
    // root.innerHTML = "";
    let ui = data.map((movie, i) => {
        // let li = elm(
        //     "li", 
        //     {}, 
        //     elm("label", {
        //         for: i, 
        //     },movie.name),
        //     elm("button", {
        //         id:i,
        //         onClick: handleChange,
        //     }, movie.watched ? `Watched` : `To Watch`)
        // )
        return <li>
            <label className="movie-name" for={i}>{movie.name}</label>
            <button id={i} onClick={handleChange}>{ movie.watched ? `Watched` : `To Watch`}</button>
        </li>
    })
    console.log(ui)
    ReactDOM.render(ui, rootElm)
}

createUI(allMovies, rootElm)
</script>
   
</body>

</html>